if("undefined"!==typeof oB)$.error('OrangeBox: Variable "oB", used by OrangeBox, is already defined');else{var oB;(function(a){oB={progress:"",playing:"",slideshowTimer:"",slideshow:"",docHeight:"",docWidth:"",controlTimer:"",settings:{autoplay:!1,fadeControls:!1,fadeCaption:!0,keyboardNavigation:!0,orangeControls:!1,showClose:!0,showDots:!1,showNav:!0,addThis:0,notFound:"Not Found",overlayOpacity:0.95,contentBorderWidth:4,contentMinWidth:200,contentMinHeight:100,iframeWidth:0.75,iframeHeight:0.75,
inlineWidth:0.5,inlineHeight:0,maxImageWidth:0.75,maxImageHeight:0.75,maxVideoWidth:640,maxVideoHeight:390,fadeTime:200,slideshowTimer:3E3},methods:{init:function(b){return!a("#ob_window").length?(b&&a.extend(oB.settings,b),oB.settings.addThis&&a.getScript("http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4dd42f2b5b9fc332"),this.each(function(){a(this).click(function(a){a.preventDefault();oB.methods.create(this)})})):!1},create:function(b,c){function h(a,b){var d;for(d=0;d<oB.galleryArray.length;d++){var c=
oB.galleryArray[d].data("ob_data").ob_href;if(b&&c===a.attr("id")||c===a.attr("href"))return!1}return!0}c&&a.extend(oB.settings,c);b||(b=this);var g=a('<ul id="ob_dots"></ul>'),f;f=a(b).attr("rel");var e;oB.galleryArray=[];oB.slideshow=!0;oB.docHeight=a(document).height();oB.docWidth=a(document).width();jQuery().orangeControls||(oB.settings.orangeControls=!1);f&&f.indexOf("[")&&(e=f.substring(f.indexOf("[")+1,f.indexOf("]")));if(e){var d=0;a("a[rel*='lightbox["+e+"]']").each(function(){var b=h(a(this),
!1);oB.methods.setupData(a(this),!1,d);var c=a(this).data("ob_data").ob_contentType;b&&!1!==c&&(oB.galleryArray[d]=a(this),oB.settings.showDots&&g.append('<li id="ob_dot'+d+'"></li>'),"image"!==c&&(oB.slideshow=!1),d++)});0<a("#ob_gallery").length&&a("#ob_gallery li."+e).each(function(){var b=h(a(this),!0);oB.methods.setupData(a(this),!0,d);var c=a(this).data("ob_data").ob_contentType;b&&!1!==c&&(oB.galleryArray[d]=a(this),oB.settings.showDots&&g.append('<li id="ob_dot'+d+'"></li>'),"image"!==c&&
(oB.slideshow=!1),d++)})}"ob_hidden_set"===a(b).attr("href")?(f=oB.galleryArray[0],oB.methods.setupData(f,!0,0)):(f=a(b),oB.methods.setupData(f,!1,!1));f.data("ob_data").ob_contentType||(f=oB.galleryArray[0]);if(f.data("ob_data").ob_contentType){var l=a('<div id="ob_overlay"></div>'),q=a('<div id="ob_container"></div>'),j=a('<div id="ob_float"></div>');e=a('<div id="ob_window"></div>').click(function(a){a.stopPropagation()});var r=a('<div title="close" class="ob_controls ob_cs" id="ob_close"></div>').click(function(){oB.methods.destroy(oB.settings)}),
s=a('<div id="ob_title"></div>'),t=a('<a class="ob_nav ob_controls ob_cs" id="ob_right"><span class="ob_cs" id="ob_right-ico"></span></a>'),k=a('<a class="ob_nav ob_controls ob_cs" id="ob_left"><span class="ob_cs" id="ob_left-ico"></span></a>'),u=a('<div id="ob_content"></div>').css({"border-width":oB.settings.contentBorderWidth,"min-height":oB.settings.contentMinHeight,"min-width":oB.settings.contentMinWidth});oB.playing=oB.settings.autoplay;oB.progress=null;l.css({opacity:oB.settings.overlayOpacity,
"min-height":a(document).height(),"min-width":a(document).width()});"undefined"===typeof document.body.style.maxHeight&&a("body","html").css({height:"100%",width:"100%"});a("body").append(l.click(function(){oB.methods.destroy(oB.settings)}));a("body").append(q.click(function(){oB.methods.destroy(oB.settings)}));oB.settings.showClose&&e.append(r);e.append(u).append(s);a("#ob_container").append(j).append(e);l.show(oB.settings.fadeTime);l=function(a){null===oB.progress&&(27===a.keyCode?oB.methods.destroy(oB.settings):
37===a.keyCode?(oB.methods.slideshowPause(),oB.methods.navigate(-1)):39===a.keyCode&&(oB.methods.slideshowPause(),oB.methods.navigate(1)))};oB.settings.keyboardNavigation&&a(document).keydown(l);0<oB.galleryArray.length&&(oB.settings.orangeControls&&1<oB.galleryArray.length&&(a(document).orangeControls(),a(document).bind("oc_right",function(){null===oB.progress&&(oB.methods.slideshowPause(),oB.methods.navigate(1))}),a(document).bind("oc_left",function(){null===oB.progress&&(oB.methods.slideshowPause(),
oB.methods.navigate(-1))}),a(document).bind("oc_pause",function(){a(document).orangeControls("update",{play:!0});oB.methods.slideshowPause()}),a(document).bind("oc_play",function(){a(document).orangeControls("update",{play:!1});oB.methods.slideshowPlay()})),oB.settings.showNav&&1<oB.galleryArray.length&&(e.append(t).append(k),k.click(function(a){null===oB.progress&&(oB.methods.slideshowPause(),a.stopPropagation(),oB.methods.navigate(-1))}),t.click(function(a){null===oB.progress&&(oB.methods.slideshowPause(),
a.stopPropagation(),oB.methods.navigate(1))})),oB.settings.showDots&&1<oB.galleryArray.length&&(e.append(g),g.find("li").click(function(){if(!a(this).hasClass("current")&&null===oB.progress){oB.methods.slideshowPause();var b=a(this).attr("id").substr(6);g.find("li").removeClass("current");a(this).addClass("current");oB.methods.navigate("",b)}})));oB.methods.showContent(f,!0)}},setupData:function(b,c,h){var g=!1,f=0,e=0,d,l="";"undefined"!==typeof b.attr("title")&&(l=b.attr("title"));if(c=c?b.attr("id"):
b.attr("href"))if(c.match(/(width\=)|(height\=)/)&&(e=c.indexOf("height=")+7,f=c.indexOf("width=")+6,e=c.substr(e),f=c.substr(f),0<e.indexOf("&")&&(e=e.substr(0,e.indexOf("&"))),0<f.indexOf("&")&&(f=f.substr(0,f.indexOf("&")))),c.match(/\?iframe/)?g="iframe":c.match(/\.(?:jpg|jpeg|bmp|png|gif)$/)?g="image":c.match(/\.(?:mov|mp4|m4v)(\?.{6,}\&.{6,})?$/)?g="quicktime":c.match(/\.swf(\?.{6,}\&.{6,})?$/)?g="flash":c.match(/^http:\/\/\w{0,3}\.?youtube\.\w{2,3}\/watch\?v=[\w\-]{11}/)?g="youtube":c.match(/^http:\/\/\w{0,3}\.?vimeo\.com\/\d{1,10}/)?
g="vimeo":c.match(/^http:\/\/\w{0,3}\.?viddler\.com\/(?:simple|player)\/\w{1,10}/)?g="viddler":c.match(/^#\w{1,}/)?g="inline":c.match(/ob_hidden_set/)||a.error("OrangeBox: Unsupported Media"),!1===h)for(d=0;d<oB.galleryArray.length;d++)oB.galleryArray[d].data("ob_data").ob_href===c&&(h=d);b.data("ob_data",{ob_height:e,ob_width:f,ob_index:h,ob_contentType:g,ob_href:c,ob_title:l,ob_linkText:b.attr("data-ob_linkText"),ob_link:b.attr("data-ob_link"),ob_caption:b.attr("data-ob_caption"),ob_linkTarget:b.attr("data-ob_linkTarget"),
ob_share:b.attr("data-ob_share"),ob_shareLink:b.attr("data-ob_shareLink")})},destroy:function(b,c){a(document).trigger("oB_closing");b&&a.extend(oB.settings,b);oB.methods.showLoad("stop");clearTimeout(oB.controlTimer);clearTimeout(oB.slideshowTimer);clearTimeout(oB.scrollTimer);oB.settings.orangeControls&&a(document).orangeControls("destroy",oB.settings.fadeTime);a(document).unbind("keydown").unbind("mousemove");a("#ob_overlay").fadeOut(oB.settings.fadeTime,function(){a(this).remove().empty()});a("#ob_container").fadeOut(oB.settings.fadeTime,
function(){a(this).remove().empty();a(document).trigger("oB_closed");c&&jQuery.isFunction(c)&&c()})},showContent:function(b,c){function h(){var c=j.outerHeight(),d=j.outerWidth(),e=c+2*oB.settings.contentBorderWidth,f=d+2*oB.settings.contentBorderWidth,g=a(window).scrollTop(),h="";0===g&&(g=a(document).scrollTop());0===g&&(g=window.pageYOffset);b.data("ob_data").ob_linkText&&(b.data("ob_data").ob_link?(h="_self"===b.data("ob_data").ob_linkTarget?'target="_self"':'target="_blank"',l=l+' <a href="'+
b.data("ob_data").ob_link+'" '+h+"  >"+b.data("ob_data").ob_linkText+"</a>"):l=l+" "+b.data("ob_data").ob_linkText);a("#ob_title").append("<h3>"+l+"</h3>");b.data("ob_data").ob_caption&&(s.append("<p>"+b.data("ob_data").ob_caption+"</p>"),a("#ob_content").append(s));e<oB.settings.contentMinHeight&&(e=oB.settings.contentMinHeight+2*oB.settings.contentBorderWidth);f<oB.settings.contentMinWidth&&(f=oB.settings.contentMinWidth+2*oB.settings.contentBorderWidth);a("#ob_container").css({"margin-top":g});
a("#ob_window").css({height:e,width:f});a("#ob_float").css({"margin-bottom":-a("#ob_window").outerHeight(!0)/2});t?a("#ob_content").css({height:c,width:d,"min-height":0}):a("#ob_content").css({height:e-2*oB.settings.contentBorderWidth,width:f-2*oB.settings.contentBorderWidth,"min-height":oB.settings.contentMinHeight})}function g(){oB.methods.showLoad("stop");a("#ob_content").append(j);if(oB.settings.addThis&&"iframe"!==q&&"inline"!==q&&"false"!==b.data("ob_data").ob_share){a("#ob_share").empty().remove();
var e=a('<a id="ob_share" class="addthis_button_compact"></a>'),f="ob_share-"+l,g=d;b.data("ob_data").ob_shareLink&&(g=b.data("ob_data").ob_shareLink);e.addClass(f);a("#ob_window").append(e);a("#ob_title").css("margin-right",24);addthis.button("."+f,{services_compact:"twitter,facebook,digg,delicious,more",ui_offset_left:-244,ui_offset_top:4},{url:g,title:l});a("#ob_share").html("").append('<span class="at300bs at15nc at15t_compact"></span>');""===l&&(l="share")}a("#ob_window").fadeIn(oB.settings.fadeTime,
function(){c&&a(document).trigger("oB_init");a("#ob_overlay").css({height:a(document).height()})});h();var k=function(){1<oB.galleryArray.length&&(oB.settings.orangeControls&&a(document).orangeControls("toggle",{time:oB.settings.fadeTime,fade:"in"}),oB.galleryArray[r+1]?(a("#ob_right").fadeIn(oB.settings.fadeTime),a("#ob_right-ico").fadeIn(oB.settings.fadeTime)):a("#ob_right").hide(),oB.galleryArray[r-1]?(a("#ob_left").fadeIn(oB.settings.fadeTime),a("#ob_left-ico").fadeIn(oB.settings.fadeTime)):a("#ob_left").hide());
a("#ob_close").fadeIn(oB.settings.fadeTime)};oB.settings.showDots&&a("#ob_dots").find("li").each(function(){var c="ob_dot"+b.data("ob_data").ob_index;a(this).attr("id")===c?a(this).addClass("current"):a(this).removeClass("current")});clearTimeout(oB.controlTimer);oB.settings.orangeControls&&(e={play:!0,play_active:!1,left_active:!1,right_active:!1},oB.playing&&(oB.galleryArray[r+1]&&1<oB.galleryArray.length)&&(e.play=!1),oB.galleryArray[r+1]&&1<oB.galleryArray.length&&(e.right_active=!0),oB.galleryArray[r-
1]&&1<oB.galleryArray.length&&(e.left_active=!0),oB.slideshow&&(e.play_active=!0),a(document).orangeControls("update",e));if(oB.settings.fadeControls){if(!oB.galleryArray[r+1]||!oB.galleryArray[r-1]||c)k(),oB.controlTimer=setTimeout(function(){a(".ob_controls").fadeOut(oB.settings.fadeTime);oB.settings.orangeControls&&a(document).orangeControls("toggle",{time:oB.settings.fadeTime,fade:"out"})},1200);a(document).mousemove(function(b){clearTimeout(oB.controlTimer);oB.controlTimer=setTimeout(function(){k();
!a(b.target).hasClass("ob_cs")&&!a(b.target).hasClass("oc_class")&&(oB.controlTimer=setTimeout(function(){a(".ob_controls").fadeOut(oB.settings.fadeTime);oB.settings.orangeControls&&a(document).orangeControls("toggle",{time:oB.settings.fadeTime,fade:"out"})},1200))},20)})}else k();oB.progress=null}function f(){j=a('<div id="ob_error">'+oB.settings.notFound+"</div>");oB.methods.showLoad("stop");a("#ob_content").empty().append(j);a("#ob_window").fadeIn(oB.settings.fadeTime,function(){a("#ob_overlay").css({height:a(document).height()})});
a("#ob_title").hide();a("#ob_right").hide();a("#ob_left").hide();a("#ob_dots").hide();a(document).unbind("mousemove");t=!0;h()}function e(b,c){var d=oB.docWidth,e=oB.docHeight;oB.docWidth>a(window).width()&&(d=a(window).width());oB.docHeight>a(window).height()&&(e=a(window).height());if(1<b)return b;if(0<b){if("width"===c)return d*b;if("height"===c)return e*b}return!1}var d=b.data("ob_data").ob_href,l=b.data("ob_data").ob_title,q=b.data("ob_data").ob_contentType,j,r=b.data("ob_data").ob_index,s=a('<div id="ob_caption"></div>').css({opacity:0.95});
oB.settings.fadeCaption&&(s.hide(),a("#ob_content").hover(function(){a("#ob_caption").stop().fadeTo(oB.settings.fadeTime,0.95)},function(){a("#ob_caption").stop().fadeOut(oB.settings.fadeTime)}));var t=!1;a("#ob_overlay").css({height:oB.docHeight});a("#ob_content").removeClass().addClass("content"+r);oB.methods.showLoad();switch(q){case "iframe":var k=d.replace(/\?iframe$/,"");j=a('<iframe id="ob_iframe" frameborder="0" hspace="0" scrolling="auto" src="'+k+'"></iframe>').css({height:e(oB.settings.iframeHeight,
"height"),width:e(oB.settings.iframeWidth,"width")});g();break;case "image":var u=new Image;j=a(u);j.load(function(){var a=0,b=0,c=u.width,d=u.height;oB.slideshow&&oB.playing&&(oB.slideshowTimer=setTimeout(function(){oB.methods.navigate(1)},oB.settings.slideshowTimer));a=e(oB.settings.maxImageHeight,"height");b=e(oB.settings.maxImageWidth,"width");d>a&&(c=c*a/d,d=a);c>b&&(d=d*b/c,c=b);d<oB.settings.contentMinHeight&&j.css({"margin-top":oB.settings.contentMinHeight/2-d/2});c<oB.settings.contentMinWidth&&
j.css({"margin-left":oB.settings.contentMinWidth/2-c/2});j.css({height:parseInt(d,10),width:parseInt(c,10)});g()}).error(function(){f()}).attr({src:d,id:"ob_image"});break;case "inline":a(d).length&&""!==a(d).html()?(j=a('<div id="ob_inline">'+a(d).html()+"</div>").css({height:e(oB.settings.inlineHeight,"height"),width:e(oB.settings.inlineWidth,"width")}),g()):f();break;case "quicktime":case "youtube":case "vimeo":case "viddler":case "flash":var m;m=e(oB.settings.maxVideoHeight,"height");var v=e(oB.settings.maxVideoWidth,
"width"),p,n;b.data("ob_data").ob_height&&b.data("ob_data").ob_width?(k=b.data("ob_data").ob_height,p=b.data("ob_data").ob_width,k>m&&(p=p*m/k,k=m),p>v&&(k=k*v/p,p=v)):(p=v,k=m);"youtube"===q?(n=d.indexOf("?v=")+3,m=d.indexOf("&")>n?d.substring(n,d.indexOf("&")):d.substring(n),j=a('<iframe id="ob_video" height="100%" width="100%" type="text/html" frameborder="0" hspace="0" scrolling="auto" src="http://www.youtube.com/embed/'+m+'?fs=1&hl=en_US&rel=0&autoplay=1&autohide=1&wmode=transparent&enablejsapi=1"></iframe>')):
"vimeo"===q?(n=d.indexOf("vimeo.com/")+10,m=d.indexOf("?")>n?d.substring(n,d.indexOf("?")):d.substring(n),j=a('<iframe id="ob_video" height="100%" width="100%" type="text/html" frameborder="0" hspace="0" scrolling="auto" src="http://player.vimeo.com/video/'+m+'?title=0&byline=0&portrait=0&autoplay=1&wmode=transparent"></iframe>')):"viddler"===q?(0<d.indexOf("viddler.com/player/")?n=d.indexOf("viddler.com/player/")+19:0<d.indexOf("viddler.com/simple/")&&(n=d.indexOf("viddler.com/simple/")+19),m=d.indexOf("?")>
n?d.substring(n,d.indexOf("?")):d.substring(n),m=m.replace(/\//g,""),j=a('<iframe id="ob_video" height="100%" width="100%" type="text/html" frameborder="0" hspace="0" scrolling="auto" src="http://cdn.static.viddler.com/flash/publisher.swf?key='+m+'&title=0&byline=0&portrait=0&autoplay=1&wmode=transparent"></iframe>')):"quicktime"===q?j=a('<div id="ob_video"><object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="'+k+'" width="'+p+
'"><param name="src" value="'+d+'"><param name="wmode" value="transparent" /><param name="type" value="video/quicktime"><param name="autoplay" value="true"><embed src="'+d+'" height="'+k+'" width="'+p+'" autoplay="true" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/" scale="aspect"></embed></object></div>'):"flash"===q&&(j=a('<div id="ob_video"><embed flashVars="playerVars=autoPlay=yes" src="'+d+'" wmode="transparent" pluginspage="http://www.macromedia.com/go/getflashplayer" allowFullScreen="true" allowScriptAccess="always" width="'+
p+'" height="'+k+'" type="application/x-shockwave-flash"></embed></div>'));j.css({width:p,height:k});g();break;default:a.error("OrangeBox: Unsupported Media")}},navigate:function(b,c,h){h&&a.extend(oB.settings,h);c||(h=parseInt(a("#ob_content").attr("class").substr(7),10),1===b?c=h+1:-1===b&&(c=h-1));oB.galleryArray[c]?(oB.progress=!0,a(document).trigger("oB_navigate",[c]),a("#ob_window").fadeOut(oB.settings.fadeTime,function(){a("#ob_title").empty();a("#ob_content").empty();oB.methods.showContent(oB.galleryArray[c],
!1)})):oB.progress=null;oB.galleryArray[c+1]||oB.methods.slideshowPause()},slideshowPlay:function(){a(document).trigger("oB_play");var b=parseInt(a("#ob_content").attr("class").substr(7),10);oB.playing=!0;oB.galleryArray[b+1]?oB.methods.navigate(1):oB.methods.navigate(0,0)},slideshowPause:function(){oB.playing&&(a(document).trigger("oB_pause"),oB.playing=!1,clearTimeout(oB.slideshowTimer))},showLoad:function(b){var c,h=a('<div id="ob_load"></div>').hide();"stop"===b?(clearTimeout(c),a("#ob_load").remove()):
(clearTimeout(c),a("body").append(h),c=setTimeout(function(){a("#ob_load").fadeIn()},600))}}};a.fn.orangeBox=function(b){if("showContent"===b||"setupData"===b)return a.error("OrangeBox: "+b+" cannot be called externally"),!1;if(oB.methods[b])return oB.methods[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return oB.methods.init.apply(this,arguments);a.error("OrangeBox: Method "+b+" does not exist in OrangeBox");return!1}})(jQuery)}
jQuery(document).ready(function(a){"undefined"!==typeof orangebox_vars?a("a[rel*=lightbox]").orangeBox(orangebox_vars):a("a[rel*=lightbox]").orangeBox()});